apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: quant-framework-ingress\n  namespace: quant-framework\n  annotations:\n    kubernetes.io/ingress.class: nginx\n    nginx.ingress.kubernetes.io/ssl-redirect: \"true\"\n    nginx.ingress.kubernetes.io/force-ssl-redirect: \"true\"\n    nginx.ingress.kubernetes.io/proxy-body-size: \"20m\"\n    nginx.ingress.kubernetes.io/proxy-connect-timeout: \"60\"\n    nginx.ingress.kubernetes.io/proxy-send-timeout: \"60\"\n    nginx.ingress.kubernetes.io/proxy-read-timeout: \"60\"\n    # Rate limiting\n    nginx.ingress.kubernetes.io/rate-limit: \"100\"\n    nginx.ingress.kubernetes.io/rate-limit-window: \"1m\"\n    # CORS\n    nginx.ingress.kubernetes.io/enable-cors: \"true\"\n    nginx.ingress.kubernetes.io/cors-allow-origin: \"https://quant-framework.com\"\n    nginx.ingress.kubernetes.io/cors-allow-methods: \"GET, POST, PUT, DELETE, OPTIONS\"\n    nginx.ingress.kubernetes.io/cors-allow-headers: \"DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization\"\n    # SSL\n    cert-manager.io/cluster-issuer: \"letsencrypt-prod\"\n    # Security headers\n    nginx.ingress.kubernetes.io/configuration-snippet: |\n      add_header X-Frame-Options \"SAMEORIGIN\" always;\n      add_header X-Content-Type-Options \"nosniff\" always;\n      add_header X-XSS-Protection \"1; mode=block\" always;\n      add_header Referrer-Policy \"strict-origin-when-cross-origin\" always;\n      add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains\" always;\nspec:\n  tls:\n  - hosts:\n    - quant-framework.com\n    - www.quant-framework.com\n    - api.quant-framework.com\n    secretName: quant-framework-tls\n  rules:\n  - host: quant-framework.com\n    http:\n      paths:\n      - path: /api\n        pathType: Prefix\n        backend:\n          service:\n            name: quant-framework-backend\n            port:\n              number: 8000\n      - path: /ws\n        pathType: Prefix\n        backend:\n          service:\n            name: quant-framework-backend\n            port:\n              number: 8000\n      - path: /\n        pathType: Prefix\n        backend:\n          service:\n            name: quant-framework-frontend\n            port:\n              number: 80\n  - host: www.quant-framework.com\n    http:\n      paths:\n      - path: /\n        pathType: Prefix\n        backend:\n          service:\n            name: quant-framework-frontend\n            port:\n              number: 80\n  - host: api.quant-framework.com\n    http:\n      paths:\n      - path: /\n        pathType: Prefix\n        backend:\n          service:\n            name: quant-framework-backend\n            port:\n              number: 8000\n